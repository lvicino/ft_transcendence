<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interface de Test : API Globale (Cookies HttpOnly)</title>
    <style>
        body { font-family: monospace; background-color: #1e1e1e; color: #d4d4d4; padding: 20px; }
        .container { display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 20px; }
        .panel { border: 1px solid #444; padding: 15px; width: 300px; background-color: #252526; }
        .panel.wide { width: 100%; max-width: 620px; }
        input, textarea { width: 90%; padding: 5px; margin-top: 5px; background: #3c3c3c; border: 1px solid #555; color: #fff; font-family: monospace; }
        button { margin-top: 15px; padding: 8px 15px; cursor: pointer; background: #0e639c; color: white; border: none; }
        button:hover { background: #1177bb; }
        .log-panel { border: 1px solid #444; padding: 15px; background-color: #000; }
        pre { margin: 0; white-space: pre-wrap; word-wrap: break-word; color: #ce9178; }
        .status { font-weight: bold; color: #4ec9b0; margin-bottom: 10px; display: block; }
    </style>
</head>
<body>
    <h1>Client de Test : Architecture Microservices (Cookies)</h1>
    
    <div class="container">
        <div class="panel">
            <h2>POST /api/auth/register</h2>
            <form id="registerForm">
                <label>Email: <input type="email" id="regEmail" required></label><br>
                <label>Username: <input type="text" id="regUsername" required></label><br>
                <label>Password: <input type="password" id="regPassword" required minlength="1"></label><br>
                <button type="submit">Exécuter la requête</button>
            </form>
        </div>

        <div class="panel">
            <h2>POST /api/auth/login</h2>
            <form id="loginForm">
                <label>Email: <input type="email" id="logEmail" required></label><br>
                <label>Password: <input type="password" id="logPassword" required></label><br>
                <button type="submit">Exécuter la requête</button>
            </form>
        </div>

        <div class="panel">
            <h2>GET /api/auth/login/oauth</h2>
            <p style="font-size: 0.9em; color: #888;">Délégation d'authentification (Intranet 42).</p>
            <button id="oauthButton" style="background: #4ec9b0; color: #000; font-weight: bold;">Initialiser OAuth 42</button>
        </div>

        <div class="panel wide">
            <h2>POST /api/games/</h2>
            <p style="font-size: 0.9em; color: #888;">Requiert un cookie d'authentification valide.</p>
            <form id="gameForm">
                <label>Objet JSON "gameParameter": <br>
                <textarea id="gameParam" rows="5" required>{
  "gw": 100,
  "gh": 100,
  "ballRadius": 5,
  "ballSpeed": 5,
  "playerW": 5,
  "playerH": 5,
  "playerSpeed": 1,
  "playerNumber": 2
}</textarea>
                </label><br>
                <button type="submit">Exécuter la requête (Créer la partie)</button>
            </form>
        </div>
    </div>

    <div class="panel wide" style="width: auto;">
        <h2>État de la Session</h2>
        <div><strong>Gestion des jetons : </strong><span style="color: #4ec9b0;">Déléguée au navigateur (Cookies HttpOnly, Secure)</span></div>
        <div style="font-size: 0.85em; margin-top: 5px; color: #888;">Le JavaScript n'a pas d'accès direct au JWT. L'authentification est validée par l'exécution réussie de la requête /api/game/.</div>
    </div><br>

    <div class="log-panel">
        <h2>Sortie Standard (Réponse Serveur)</h2>
        <span id="httpStatus" class="status">En attente d'exécution...</span>
        <pre id="jsonPayload"></pre>
    </div>

    <script src="app.js"></script>
</body>
</html>
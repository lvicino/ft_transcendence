<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interface de Test : API Authentification v1.2.0</title>
    <style>
        body { font-family: monospace; background-color: #1e1e1e; color: #d4d4d4; padding: 20px; }
        .container { display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 20px; }
        .panel { border: 1px solid #444; padding: 15px; width: 300px; background-color: #252526; }
        input { width: 90%; padding: 5px; margin-top: 5px; background: #3c3c3c; border: 1px solid #555; color: #fff; }
        button { margin-top: 15px; padding: 8px 15px; cursor: pointer; background: #0e639c; color: white; border: none; }
        button:hover { background: #1177bb; }
        .log-panel { border: 1px solid #444; padding: 15px; background-color: #000; }
        pre { margin: 0; white-space: pre-wrap; word-wrap: break-word; color: #ce9178; }
        .status { font-weight: bold; color: #4ec9b0; margin-bottom: 10px; display: block; }
    </style>
</head>
<body>
    <h1>Client de Test : Fastify Auth API (OAuth2)</h1>
    
    <div class="container">
        <div class="panel">
            <h2>POST /api/auth/register</h2>
            <form id="registerForm">
                <label>Email: <input type="email" id="regEmail" required></label><br>
                <label>Username: <input type="text" id="regUsername" required></label><br>
                <label>Password: <input type="password" id="regPassword" required minlength="1"></label><br>
                <button type="submit">Exécuter la requête</button>
            </form>
        </div>

        <div class="panel">
            <h2>POST /api/auth/login</h2>
            <form id="loginForm">
                <label>Email: <input type="email" id="logEmail" required></label><br>
                <label>Password: <input type="password" id="logPassword" required></label><br>
                <button type="submit">Exécuter la requête</button>
            </form>
        </div>

        <div class="panel">
            <h2>GET /api/auth/login/oauth</h2>
            <p style="font-size: 0.9em; color: #888;">Délégation d'authentification via l'Intranet 42.</p>
            <button id="oauthButton" style="background: #4ec9b0; color: #000; font-weight: bold;">Initialiser OAuth 42</button>
        </div>
    </div>

    <div class="panel" style="width: auto;">
        <h2>État de la Session</h2>
        <div><strong>Access Token (JWT) : </strong><span id="tokenDisplay" style="color: #d7ba7d;">Non défini</span></div>
    </div><br>

    <div class="log-panel">
        <h2>Sortie Standard (Réponse Serveur)</h2>
        <span id="httpStatus" class="status">En attente d'exécution...</span>
        <pre id="jsonPayload"></pre>
    </div>

    <script src="app.js"></script>
</body>
</html>
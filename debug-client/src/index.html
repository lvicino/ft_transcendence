<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Dashboard â€” ft_transcendence</title>
    <style>
        /* â”€â”€ Reset & Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html, body {
            height: 100vh; width: 100vw; overflow: hidden;
            font-family: 'Courier New', Courier, monospace;
            background: #0d1117; color: #c9d1d9;
        }

        /* â”€â”€ Main Grid: 4 columns, header + content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        body {
            display: grid;
            grid-template-columns: 1fr 1fr 1.4fr 1fr;
            grid-template-rows: auto 1fr;
            gap: 6px;
            padding: 6px;
        }

        /* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        header {
            grid-column: 1 / -1;
            display: flex; align-items: center; justify-content: space-between;
            background: linear-gradient(90deg, #161b22 0%, #1a2233 100%);
            border: 1px solid #30363d; border-radius: 6px;
            padding: 5px 14px;
        }
        header h1 { font-size: 0.9rem; font-weight: 700; color: #58a6ff; letter-spacing: 0.5px; }
        header .tag { font-size: 0.6rem; padding: 2px 8px; background: #238636; color: #fff; border-radius: 10px; }

        /* â”€â”€ Column Containers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .col {
            display: flex; flex-direction: column; gap: 5px;
            min-height: 0;
        }

        /* â”€â”€ Panel (card) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .panel {
            background: #161b22;
            border: 1px solid #30363d; border-radius: 6px;
            padding: 6px 8px;
            display: flex; flex-direction: column;
            overflow: hidden;
            flex: 1 1 0;
            min-height: 0;
        }
        .panel h2 {
            font-size: 0.65rem; color: #8b949e; text-transform: uppercase;
            letter-spacing: 1px; margin-bottom: 4px;
            padding-bottom: 3px; border-bottom: 1px solid #21262d;
            flex-shrink: 0;
        }
        .panel h2 .method { font-weight: 800; margin-right: 4px; }
        .panel h2 .method.post { color: #3fb950; }
        .panel h2 .method.get  { color: #58a6ff; }
        .panel h2 .method.ws   { color: #d2a8ff; }

        /* â”€â”€ Form Elements â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        label {
            display: flex; align-items: center; gap: 4px;
            font-size: 0.65rem; color: #8b949e; margin-bottom: 3px;
        }
        label span { min-width: 52px; text-align: right; flex-shrink: 0; }
        input, textarea {
            flex: 1; padding: 3px 5px;
            background: #0d1117; border: 1px solid #30363d; border-radius: 4px;
            color: #c9d1d9; font-family: inherit; font-size: 0.68rem;
            outline: none; transition: border-color 0.15s;
        }
        input:focus, textarea:focus { border-color: #58a6ff; }
        textarea { resize: none; flex: 1 1 auto; min-height: 30px; }

        /* â”€â”€ Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        button {
            padding: 4px 8px; border: none; border-radius: 4px;
            font-family: inherit; font-size: 0.65rem; font-weight: 600;
            cursor: pointer; transition: all 0.15s ease;
            flex-shrink: 0;
        }
        button:active { transform: scale(0.97); }
        .btn-primary   { background: #238636; color: #fff; }
        .btn-primary:hover { background: #2ea043; }
        .btn-action    { background: #1f6feb; color: #fff; }
        .btn-action:hover  { background: #388bfd; }
        .btn-oauth     { background: #6e40c9; color: #fff; }
        .btn-oauth:hover   { background: #8957e5; }
        .btn-danger    { background: #da3633; color: #fff; }
        .btn-danger:hover  { background: #f85149; }
        .btn-sm        { padding: 2px 6px; font-size: 0.6rem; }
        .btn-ws-dir    { background: #30363d; color: #c9d1d9; flex: 1; }
        .btn-ws-dir:hover { background: #484f58; }

        /* â”€â”€ Log Panels â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .log-panel {
            background: #010409;
            border: 1px solid #30363d; border-radius: 6px;
            padding: 6px 8px;
            display: flex; flex-direction: column;
            overflow: hidden;
            flex: 1 1 0;
            min-height: 0;
        }
        .log-panel h2 {
            font-size: 0.65rem; color: #8b949e; text-transform: uppercase;
            letter-spacing: 1px; margin-bottom: 3px;
            padding-bottom: 3px; border-bottom: 1px solid #21262d;
            flex-shrink: 0;
        }
        .status-line {
            font-size: 0.65rem; font-weight: 700; color: #3fb950;
            margin-bottom: 3px; flex-shrink: 0;
        }
        .status-line.ws-status { color: #d2a8ff; }
        pre {
            margin: 0; flex: 1 1 auto; overflow-y: auto;
            white-space: pre-wrap; word-wrap: break-word;
            font-size: 0.63rem; color: #f0883e; line-height: 1.3;
            min-height: 0;
        }
        pre::-webkit-scrollbar { width: 3px; }
        pre::-webkit-scrollbar-thumb { background: #30363d; border-radius: 2px; }

        /* â”€â”€ WS Controls â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .ws-controls { display: none; margin-top: 4px; border-top: 1px solid #21262d; padding-top: 4px; }
        .ws-controls.active { display: block; }
        .ws-controls .btn-row { display: flex; gap: 3px; margin-bottom: 3px; }

        /* â”€â”€ OAuth Info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .info-text { font-size: 0.6rem; color: #484f58; flex: 1; display: flex; align-items: center; }

        /* â”€â”€ Form group stacking â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .form-body { display: flex; flex-direction: column; flex: 1 1 auto; min-height: 0; }

        /* â”€â”€ Pong Canvas Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .canvas-panel {
            background: #010409;
            border: 1px solid #30363d; border-radius: 6px;
            padding: 6px 8px;
            display: flex; flex-direction: column;
            overflow: hidden;
            flex: 1 1 0;
            min-height: 0;
        }
        .canvas-panel h2 {
            font-size: 0.65rem; color: #8b949e; text-transform: uppercase;
            letter-spacing: 1px; margin-bottom: 3px;
            padding-bottom: 3px; border-bottom: 1px solid #21262d;
            flex-shrink: 0;
        }
        .canvas-panel .canvas-wrapper {
            flex: 1 1 auto; min-height: 0;
            display: flex; align-items: center; justify-content: center;
            position: relative;
        }
        #pongCanvas {
            background: #0d1117;
            border: 1px solid #21262d;
            border-radius: 4px;
            max-width: 100%; max-height: 100%;
        }
        .canvas-overlay {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.7rem; color: #484f58;
            text-align: center; pointer-events: none;
        }
        .canvas-overlay.hidden { display: none; }
        .canvas-hud {
            display: flex; justify-content: space-between; align-items: center;
            font-size: 0.6rem; color: #8b949e;
            padding-top: 3px; flex-shrink: 0;
        }
        .canvas-hud .fps { color: #3fb950; }
        .canvas-hud .game-info { color: #d2a8ff; }
    </style>
</head>
<body>

    <!-- â•â•â•â• HEADER â•â•â•â• -->
    <header>
        <h1>ðŸ›° Debug Dashboard â€” ft_transcendence</h1>
        <span class="tag">QA Agent Interface</span>
    </header>

    <!-- â•â•â•â• COL 1 : AUTH-API â•â•â•â• -->
    <div class="col">
        <!-- Register -->
        <div class="panel" data-testid="panel-register">
            <h2><span class="method post">POST</span> /api/auth/register</h2>
            <form id="registerForm" data-testid="register-form" class="form-body">
                <label><span>Email</span>    <input type="email"    id="regEmail"    data-testid="reg-email"    placeholder="user@test.io" required></label>
                <label><span>Username</span> <input type="text"     id="regUsername" data-testid="reg-username" placeholder="testuser"     required></label>
                <label><span>Password</span> <input type="password" id="regPassword" data-testid="reg-password" placeholder="â€¢â€¢â€¢â€¢"         required minlength="1"></label>
                <button type="submit" class="btn-primary" data-testid="submit-register">Register</button>
            </form>
        </div>

        <!-- Login -->
        <div class="panel" data-testid="panel-login">
            <h2><span class="method post">POST</span> /api/auth/login</h2>
            <form id="loginForm" data-testid="login-form" class="form-body">
                <label><span>Email</span>    <input type="email"    id="logEmail"    data-testid="log-email"    placeholder="user@test.io" required></label>
                <label><span>Password</span> <input type="password" id="logPassword" data-testid="log-password" placeholder="â€¢â€¢â€¢â€¢"         required></label>
                <button type="submit" class="btn-primary" data-testid="submit-login">Login</button>
            </form>
        </div>

        <!-- OAuth -->
        <div class="panel" data-testid="panel-oauth">
            <h2><span class="method get">GET</span> /api/auth/login/oauth</h2>
            <span class="info-text">OAuth 2.0 â†’ Intranet 42</span>
            <button id="oauthButton" class="btn-oauth" data-testid="btn-oauth">OAuth 42</button>
        </div>
    </div>

    <!-- â•â•â•â• COL 2 : GAME-API â•â•â•â• -->
    <div class="col">
        <!-- Create Game -->
        <div class="panel" data-testid="panel-create-game">
            <h2><span class="method post">POST</span> /api/games/</h2>
            <form id="gameForm" data-testid="game-form" class="form-body">
                <label style="align-items: flex-start;"><span>Params</span>
                    <textarea id="gameParam" data-testid="game-param" required>{
  "gw": 100, "gh": 100,
  "ballRadius": 5, "ballSpeed": 5,
  "playerW": 5, "playerH": 5,
  "playerSpeed": 1, "playerNumber": 2
}</textarea>
                </label>
                <button type="submit" class="btn-primary" data-testid="submit-game">CrÃ©er la partie</button>
            </form>
        </div>

        <!-- WebSocket Tunnel -->
        <div class="panel" data-testid="panel-ws">
            <h2><span class="method ws">WS</span> /api/games/ws</h2>
            <form id="wsForm" data-testid="ws-form" class="form-body">
                <label><span>Game ID</span>  <input type="text" id="wsGameId"   data-testid="ws-game-id"  placeholder="id" required></label>
                <label><span>Password</span> <input type="text" id="wsPassword" data-testid="ws-password" placeholder="optionnel"></label>
                <button type="submit" id="wsConnectBtn" class="btn-action" data-testid="btn-ws-connect">Ouvrir Tunnel WS</button>
            </form>

            <div id="wsControls" class="ws-controls" data-testid="ws-controls">
                <div class="btn-row">
                    <button type="button" class="btn-ws-dir btn-sm" data-testid="btn-ws-input-left"  onclick="sendWsInput(-1)">â—€ -1</button>
                    <button type="button" class="btn-ws-dir btn-sm" data-testid="btn-ws-input-stop"  onclick="sendWsInput(0)">â–  0</button>
                    <button type="button" class="btn-ws-dir btn-sm" data-testid="btn-ws-input-right" onclick="sendWsInput(1)">â–¶ +1</button>
                </div>
                <button type="button" class="btn-danger btn-sm" data-testid="btn-ws-close" onclick="closeWs()">Fermer Tunnel</button>
            </div>
        </div>
    </div>

    <!-- â•â•â•â• COL 3 : PONG GAME VISUALIZER â•â•â•â• -->
    <div class="col">
        <div class="canvas-panel" data-testid="panel-pong">
            <h2>ðŸŽ® Pong â€” Vue en Direct</h2>
            <div class="canvas-wrapper">
                <canvas id="pongCanvas" data-testid="pong-canvas" width="400" height="400"></canvas>
                <div id="canvasOverlay" class="canvas-overlay" data-testid="pong-overlay">
                    En attente de donnÃ©es WSâ€¦<br>
                    <small>Connectez-vous au tunnel WebSocket<br>pour voir la partie en direct</small>
                </div>
            </div>
            <div class="canvas-hud">
                <span id="pongFps" class="fps" data-testid="pong-fps">â€”</span>
                <span id="pongInfo" class="game-info" data-testid="pong-info">Idle</span>
            </div>
        </div>
    </div>

    <!-- â•â•â•â• COL 4 : RESPONSE VIEWERS â•â•â•â• -->
    <div class="col">
        <!-- REST Log -->
        <div class="log-panel" data-testid="panel-rest-log">
            <h2>REST â€” RÃ©ponse HTTP</h2>
            <span id="httpStatus" class="status-line" data-testid="http-status">En attenteâ€¦</span>
            <pre id="jsonPayload" data-testid="json-payload"></pre>
        </div>

        <!-- WS Stream -->
        <div class="log-panel" data-testid="panel-ws-log">
            <h2>WS â€” Flux TÃ©lÃ©mÃ©trique</h2>
            <span id="wsTickStatus" class="status-line ws-status" data-testid="ws-status">DÃ©sactivÃ©</span>
            <pre id="wsPayload" data-testid="ws-payload"></pre>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>